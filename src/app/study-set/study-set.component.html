
Canedit is: {{canEdit}}

@if (!loading && studySet) {
    <h2>{{studySet.title}}</h2>
    <h3>{{studySet.description}}</h3>
    <p-table [value]="studySet.questions">
        <ng-template #header>
            <tr>
                <th>Id</th>
                <th>Body</th>
                <th>Answer</th>
                <th>Difficulty</th>
                <th>Delete</th>
            </tr>
        </ng-template>
        <ng-template #body let-q>
            <tr>
                <td>{{q.id}}</td>

                <td>{{q.body}}</td>

                <td>{{q.correctAnswer}}</td>
                
                <td> {{q.difficulty}} </td>

                <td> <p-button>Delete question</p-button> </td>
            </tr>
            <!-- <tr>
                <td colspan="5">TODO add new question</td>
            </tr> -->
            
        </ng-template>
        <ng-template #footer>
            <tr> 
                <td colspan="5"> 
                        <p-button (click)="createQuestion()" icon="fa-solid fa-plus" pTooltip="Create new study set"></p-button>
                </td>
            </tr>
            @if (creatingNew) {
                <tr>  
                    <td colspan="5"> 
                        <input pInputText [(ngModel)]="newQuestion.body" type="text" placeholder="Body" />
                        <input pInputText [(ngModel)]="newQuestion.correctAnswer" type="text" placeholder="Answer" />
                        <p-select [(ngModel)]="selectedDifficulty" [options]="difficulties" optionLabel="label" optionValue="value" placeholder="Difficulty" appendTo="body"></p-select>
                        <p-button (click)="saveNewQuestion()" icon="fa-solid fa-save" pTooltip="Save new study set"></p-button>
                    </td>
                </tr>
            }

        </ng-template>
        
        <ng-template #emptymessage>
            <tr>
                <td colspan="5">No questions found.</td>
            </tr>
        </ng-template>
    </p-table>

    [TODO] see everyone who is assigned to this set
    [TODO allow adding new question]
}